# This `.xcode.env` file is versioned and is used to source the environment
# used when running script phases inside Xcode.
# To customize your local environment, you can create an `.xcode.env.local`
# file that is not versioned.

# NODE_BINARY variable contains the PATH to the node executable.
# For CI environments (Xcode Cloud), ci_post_clone.sh creates .xcode.env.local
# with the correct path.

# Check common node locations in order of preference
if [ -x "/opt/homebrew/bin/node" ]; then
  # Apple Silicon Homebrew
  export NODE_BINARY="/opt/homebrew/bin/node"
elif [ -x "/usr/local/bin/node" ]; then
  # Intel Homebrew / CI environment
  export NODE_BINARY="/usr/local/bin/node"
elif command -v node > /dev/null 2>&1; then
  # Fallback to PATH
  export NODE_BINARY=$(command -v node)
else
  echo "error: Node.js not found! Install Node.js or set NODE_BINARY in .xcode.env.local" >&2
  exit 1
fi
